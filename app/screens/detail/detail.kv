#:import Window kivy.core.window.Window

<Detail>:
    id: 'goods-1'
    picUrl: 'https://firebasestorage.googleapis.com/v0/b/comp7510-mall.appspot.com/o/mall%2Fgoods-1.jpg?alt=media&token=0f37acb5-8bdc-4228-ad84-31acd4955975'

    MDBoxLayout:
        size_hint: (1, 1)
        orientation: 'vertical'

        MDScrollView:

            GridLayout:
                cols: 1
                size_hint: ((1, None))
                height: self.minimum_height
                spacing: dp((Window.height/1080)*20)

                AsyncImage:
                    source: root.picUrl
                    size_hint: ((1, None))
                    height: Window.height / 2
                    allow_stretch: True
                    nocache: False

                MDBoxLayout:
                    md_bg_color: app.main_bg_color
                    size_hint: ((1, None))
                    height: self.minimum_height
                    orientation: 'vertical'
                    spacing: dp((Window.height/1080)*20)
                    padding: app.padding_md

                    MDLabel:
                        text: '$ 5'
                        size_hint: ((1, None))
                        color: app.price_text_color
                        font_size: app.font_size_lg
                        height: app.font_size

                    MDLabel:
                        text: 'Apple'
                        size_hint: (1, None)
                        color: app.main_text_color
                        font_size: app.font_size
                        height: app.font_size

                    MDLabel:
                        text: 'An apple a day, keep the doctor away!!!!!!!!!!An apple a day, keep the doctor away!!!!!!!!!!An apple a day, keep the doctor away!!!!!!!!!!An apple a day, keep the doctor away!!!!!!!!!!An apple a day, keep the doctor away!!!!!!!!!!An apple a day, keep the doctor away!!!!!!!!!!'
                        size_hint: (1, None)
                        color: app.tertiary_text_color
                        font_size: app.font_size_sm
                        height: self.texture_size[1]

                MDBoxLayout:
                    md_bg_color: app.main_bg_color
                    size_hint: (1, None)
                    height: self.minimum_height
                    orientation: 'vertical'
                    spacing: dp((Window.height/1080)*20)
                    padding: app.padding_md

                    MDLabel:
                        text: 'Comment'
                        size_hint: (1, None)
                        color: app.main_text_color
                        font_size: app.font_size_lg
                        height: app.font_size_lg

                    MDBoxLayout:
                        size_hint: (1, None)
                        height: self.minimum_height
                        orientation: 'vertical'
                        spacing: dp((Window.height/1080)*20)

                        MDBoxLayout:
                            size_hint: (1, None)
                            height: self.minimum_height
                            orientation: 'horizontal'

                            MDTextField:
                                id: comment
                                hint_text: "Add your comment"
                                mode: "rectangle"
                                size_hint: 0.7, None
                                font_size: app.font_size_sm
                                on_focus: root.comment_on_focus(self, self.focus)

                            MDIconButton:
                                icon: "pencil"
                                pos_hint: {"center_x": .5, "center_y": .5}
                                size_hint: 0.2, None
                                type: 'small'
                                on_release: root.make_a_comment()

                        MDLabel:
                            text: '1. good good good good '
                            size_hint: (1, None)
                            color: app.main_text_color
                            font_size: app.font_size_sm
                            height: app.font_size_sm

                        MDLabel:
                            text: '2. bad bad bad bad '
                            size_hint: (1, None)
                            color: app.main_text_color
                            font_size: app.font_size_sm
                            height: app.font_size_sm    

                        MDLabel:
                            text: '3. bad bad bad bad '
                            size_hint: (1, None)
                            color: app.main_text_color
                            font_size: app.font_size_sm
                            height: app.font_size_sm   

                        MDLabel:
                            text: '4. bad bad bad bad '
                            size_hint: (1, None)
                            color: app.main_text_color
                            font_size: app.font_size_sm
                            height: app.font_size_sm   

                        MDLabel:
                            text: '5. bad bad bad bad '
                            size_hint: (1, None)
                            color: app.main_text_color
                            font_size: app.font_size_sm
                            height: app.font_size_sm                   

        MDStackLayout:
            size_hint: ((1, None))
            md_bg_color: app.bottom_bg_color
            spacing: app.padding_xs
            padding: app.padding_xs
            orientation: 'rl-bt'
            height: self.minimum_height

            MDFillRoundFlatButton:
                text: 'Buy'
                md_bg_color: app.main_btn_bg_color
                font_size: app.font_size_md
                on_press: root.go_buy()

            MDFillRoundFlatButton:
                text: 'Add In Cart'
                md_bg_color: app.main_btn_bg_color
                font_size: app.font_size_md
                on_press: root.add_in_cart()

    MDBoxLayout:
        adaptive_size: True
        pos_hint: {"center_x": .1, "center_y": 0.95}

        MDFloatingActionButton:
            icon: 'arrow-left'
            md_bg_color: app.main_bg_color
            icon_color: app.main_text_color
            on_press: root.go_back()