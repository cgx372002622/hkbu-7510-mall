#:import Window kivy.core.window.Window
#:import RoundedImage app.components

<Check>:
    total_price: ''

    MDBoxLayout:
        size_hint: 1, 1
        md_bg_color: app.secondary_bg_color
        orientation: 'vertical'

        MDTopAppBar:
            md_bg_color: app.navigator_bg_color
            title: 'Check'
            theme_text_color: 'Custom'
            text_color: app.primary_font_color
            elevation: 0
            anchor_title: "center"
            specific_text_color: "black"
            left_action_items: [["arrow-left", lambda x: root.go_back()]]

        MDScrollView:

            GridLayout:
                id: goods_box
                cols: 1
                size_hint: 1, None
                height: self.minimum_height
                spacing: dp((Window.height/1080)*20)
                padding: dp((Window.height/1080)*20)

        MDBoxLayout:
            size_hint: 1, None
            md_bg_color: app.navigator_bg_color
            padding: app.padding_sm
            orientation: 'horizontal'
            height: self.minimum_height

            MDLabel:
                size_hint: .05, 1

            MDLabel:
                text: 'Total'
                size_hint: .2, 1
                font_size: app.font_size_md
                bold: True

            MDLabel:
                size_hint: .05, 1

            MDLabel:
                size_hint: .4, 1
                text: '$ ' + root.total_price
                color: app.price_text_color
                font_size: app.font_size

            MDFillRoundFlatIconButton:
                text: 'Check'
                icon: 'hand-coin'
                md_bg_color: app.primary_btn_bg_color
                theme_icon_color: 'Custom'
                icon_color: app.primary_btn_font_color
                theme_text_color: 'Custom'
                text_color: app.primary_btn_font_color
                on_release: root.check()
                size_hint: None, 1
                font_style: 'Button'
                bold: True

            MDLabel:
                size_hint: .05, 1

<CheckItem>:
    goods_count: ''
    goods_name: ''
    goods_price: ''
    goods_store: ''
    goods_pic_url: ''

    size_hint: 1, None
    height: Window.height / 3.8
    radius: 25, 25, 25, 25
    elevation: 2.5
    padding: app.padding_md
    spacing: app.padding_sm
    md_bg_color: app.primary_bg_color
    orientation: 'vertical'

    MDBoxLayout:
        size_hint: 1, None
        height: self.minimum_height
        padding: app.padding_md

        MDLabel:
            text: root.goods_store
            bold: True
            font_size: app.font_size_md
            height: self.texture_size[1]

    MDBoxLayout:
        size_hint: 1, 1
        orientation: 'horizontal'
        spacing: app.padding_lg
        padding: app.padding_sm, 0, 0, 0

        MDBoxLayout:
            size_hint: .6, 1

            RoundedImage:
                size_hint: 1, 1
                source: root.goods_pic_url
        
        MDBoxLayout:
            orientation: 'vertical'
            size_hint: 1, 1

            MDLabel:
                text: root.goods_name
                font_size: app.font_size_md
                pos_hint_y: .9
                pos_hint: {'x': .1}
                height: self.texture_size[1]

            MDLabel:
                text: '$ ' + root.goods_price
                font_size: app.font_size
                color: app.price_text_color
                pos_hint_y: .5
                pos_hint: {'x': .1}
                height: self.texture_size[1]

            MDLabel:
                text: 'x ' + root.goods_count
                font_size: app.font_size
                color: app.tertiary_text_color
                pos_hint_y: .1
                pos_hint: {'x': .1}
                height: self.texture_size[1]

<Address>:
    size_hint: 1, None
    height: self.minimum_height
    radius: 15, 15, 15, 15
    elevation: 2.5
    padding: app.padding_md
    spacing: app.padding_sm
    md_bg_color: app.primary_bg_color
    orientation: 'vertical'
    current_user_address: ''

    MDLabel:
        text: 'Your address: ' + root.current_user_address
        height: self.texture_size[1]
        size_hint: 1, None

<Phone>:
    size_hint: 1, None
    height: self.minimum_height
    radius: 15, 15, 15, 15
    elevation: 2.5
    padding: app.padding_md
    spacing: app.padding_sm
    md_bg_color: app.primary_bg_color
    orientation: 'vertical'
    current_user_phonenumber: ''

    MDLabel:
        text: 'Your phone number: ' + root.current_user_phonenumber
        height: self.texture_size[1]
        size_hint: 1, None
